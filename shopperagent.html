<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShopperAgent | AI Shopping Assistant</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif}
        :root{--bg:#fafafa;--surface:#fff;--text:#0f0f0f;--text-secondary:#6b7280;--accent:#6366f1;--accent-light:#818cf8;--accent-glow:rgba(99,102,241,0.15);--success:#22c55e;--warning:#f59e0b;--border:rgba(0,0,0,0.08);--shadow:0 4px 24px rgba(0,0,0,0.06);--shadow-lg:0 20px 40px rgba(99,102,241,0.12);--radius:20px;--radius-sm:12px}
        html{scroll-behavior:smooth}
        body{background:var(--bg);color:var(--text);min-height:100vh;line-height:1.6}
        .container{max-width:1400px;margin:0 auto;padding:0 24px}
        
        /* Toast Notifications */
        .toast-container{position:fixed;top:100px;right:24px;z-index:300;display:flex;flex-direction:column;gap:12px}
        .toast{background:var(--surface);border-radius:var(--radius-sm);padding:16px 24px;box-shadow:var(--shadow-lg);border-left:4px solid var(--accent);transform:translateX(400px);opacity:0;animation:toastSlide 0.3s forwards;display:flex;align-items:center;gap:12px;min-width:300px}
        .toast.success{border-left-color:var(--success)}
        .toast.error{border-left-color:#ef4444}
        @keyframes toastSlide{to{transform:translateX(0);opacity:1}}
        .toast-icon{font-size:24px}
        .toast-message{flex:1;font-weight:500}
        
        /* Navigation */
        .nav{position:fixed;top:0;left:0;right:0;z-index:100;background:rgba(255,255,255,0.95);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:16px 0;transition:all 0.3s}
        .nav-content{max-width:1400px;margin:0 auto;padding:0 24px;display:flex;align-items:center;justify-content:space-between}
        .logo{font-size:26px;font-weight:900;background:linear-gradient(135deg,var(--accent) 0%,var(--accent-light) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;cursor:pointer;transition:transform 0.2s}
        .logo:hover{transform:scale(1.05)}
        .nav-links{display:flex;gap:32px;align-items:center}
        .nav-link{color:var(--text-secondary);font-size:14px;font-weight:500;cursor:pointer;position:relative;transition:color 0.2s}
        .nav-link:hover{color:var(--text)}
        .nav-link::after{content:'';position:absolute;bottom:-4px;left:0;width:0;height:2px;background:var(--accent);transition:width 0.3s}
        .nav-link:hover::after{width:100%}
        .agent-badge{display:flex;align-items:center;gap:8px;background:var(--accent-glow);padding:8px 16px;border-radius:100px;font-size:13px;font-weight:600;color:var(--accent)}
        .agent-badge::before{content:'';width:8px;height:8px;background:var(--success);border-radius:50%;animation:pulse 2s infinite}
        @keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}
        .mobile-menu-btn{display:none;background:none;border:none;font-size:24px;cursor:pointer}
        
        /* Hero */
        .hero{padding:160px 0 80px;text-align:center;background:linear-gradient(180deg,var(--bg) 0%,rgba(99,102,241,0.08) 50%,var(--bg) 100%);position:relative;overflow:hidden}
        .hero::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(99,102,241,0.1) 0%,transparent 70%);animation:rotate 30s linear infinite}
        @keyframes rotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
        .hero-content{position:relative;z-index:1}
        .hero-badge{display:inline-flex;align-items:center;gap:8px;background:var(--accent-glow);padding:10px 20px;border-radius:100px;font-size:14px;font-weight:600;color:var(--accent);margin-bottom:32px;animation:fadeUp 0.6s ease-out}
        .hero h1{font-size:72px;font-weight:900;letter-spacing:-3px;line-height:1;margin-bottom:24px;animation:fadeUp 0.6s ease-out 0.1s both}
        .hero h1 span{background:linear-gradient(135deg,var(--accent) 0%,var(--accent-light) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .hero-subtitle{font-size:22px;color:var(--text-secondary);max-width:650px;margin:0 auto 40px;animation:fadeUp 0.6s ease-out 0.2s both}
        @keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
        .hero-stats{display:flex;justify-content:center;gap:48px;margin-top:48px;animation:fadeUp 0.6s ease-out 0.3s both}
        .hero-stat{text-align:center}
        .hero-stat-number{font-size:36px;font-weight:800;color:var(--accent)}
        .hero-stat-label{font-size:14px;color:var(--text-secondary);margin-top:4px}
        
        /* How it Works */
        .how-it-works{display:grid;grid-template-columns:repeat(4,1fr);gap:24px;margin-bottom:80px;padding:40px 0}
        .step-card{background:var(--surface);border-radius:var(--radius);padding:32px 24px;text-align:center;box-shadow:var(--shadow);border:1px solid var(--border);transition:all 0.3s;position:relative;overflow:hidden}
        .step-card:hover{transform:translateY(-8px);box-shadow:var(--shadow-lg)}
        .step-card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--accent),var(--accent-light));transform:scaleX(0);transition:transform 0.3s}
        .step-card:hover::before{transform:scaleX(1)}
        .step-number{width:56px;height:56px;background:linear-gradient(135deg,var(--accent) 0%,var(--accent-light) 100%);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:22px;font-weight:700;margin:0 auto 20px;box-shadow:0 8px 24px var(--accent-glow)}
        .step-title{font-size:18px;font-weight:700;margin-bottom:8px}
        .step-desc{font-size:14px;color:var(--text-secondary)}
        
        /* Curated Carts */
        .curated-section{margin-bottom:100px}
        .section-header{display:flex;align-items:flex-end;justify-content:space-between;margin-bottom:40px;flex-wrap:wrap;gap:16px}
        .section-title{font-size:40px;font-weight:800;margin-bottom:8px;line-height:1.2}
        .section-subtitle{color:var(--text-secondary);font-size:18px}
        .view-all{color:var(--accent);font-weight:600;cursor:pointer;display:flex;align-items:center;gap:8px;transition:gap 0.2s}
        .view-all:hover{gap:12px}
        .carts-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:32px}
        .cart-card{background:var(--surface);border-radius:var(--radius);padding:32px;box-shadow:var(--shadow);border:1px solid var(--border);cursor:pointer;transition:all 0.4s cubic-bezier(0.4,0,0.2,1);position:relative;overflow:hidden}
        .cart-card:hover{transform:translateY(-12px) scale(1.02);box-shadow:var(--shadow-lg)}
        .cart-card::after{content:'';position:absolute;inset:0;background:linear-gradient(135deg,transparent 0%,rgba(99,102,241,0.05) 100%);opacity:0;transition:opacity 0.3s}
        .cart-card:hover::after{opacity:1}
        .cart-badge{display:inline-flex;align-items:center;gap:6px;background:var(--accent-glow);color:var(--accent);padding:8px 16px;border-radius:100px;font-size:13px;font-weight:700;margin-bottom:20px}
        .cart-name{font-size:24px;font-weight:800;margin-bottom:12px;transition:color 0.2s}
        .cart-card:hover .cart-name{color:var(--accent)}
        .cart-desc{font-size:15px;color:var(--text-secondary);margin-bottom:24px;line-height:1.6}
        .cart-preview{display:flex;gap:12px;margin-bottom:24px}
        .cart-preview img{width:85px;height:110px;object-fit:cover;border-radius:var(--radius-sm);background:var(--surface-hover);transition:transform 0.3s}
        .cart-card:hover .cart-preview img:nth-child(1){transform:translateY(-8px)}
        .cart-card:hover .cart-preview img:nth-child(2){transform:translateY(-4px)}
        .cart-preview .more{width:85px;height:110px;background:linear-gradient(135deg,var(--surface-hover) 0%,#e5e7eb 100%);border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:700;color:var(--text-secondary)}
        .cart-meta{display:flex;align-items:center;justify-content:space-between;padding-top:20px;border-top:1px solid var(--border)}
        .cart-price{font-size:32px;font-weight:800}
        .cart-price span{font-size:16px;color:var(--text-secondary);font-weight:500}
        .btn-ghost{background:transparent;border:2px solid var(--border);color:var(--text);padding:14px 28px;border-radius:var(--radius-sm);font-size:15px;font-weight:600;cursor:pointer;transition:all 0.2s}
        .btn-ghost:hover{border-color:var(--accent);color:var(--accent);background:var(--accent-glow)}
        
        /* Styles Section */
        .styles-section{margin-bottom:100px}
        .styles-grid{display:grid;grid-template-columns:repeat(6,1fr);gap:20px}
        .style-card{aspect-ratio:1;background:var(--surface);border-radius:var(--radius);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;cursor:pointer;transition:all 0.3s cubic-bezier(0.4,0,0.2,1);border:2px solid transparent;box-shadow:var(--shadow);position:relative;overflow:hidden}
        .style-card::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,var(--accent) 0%,var(--accent-light) 100%);opacity:0;transition:opacity 0.3s}
        .style-card:hover,.style-card.active{border-color:var(--accent);transform:translateY(-8px) scale(1.05);box-shadow:0 20px 40px var(--accent-glow)}
        .style-card.active::before,.style-card:hover::before{opacity:0.1}
        .style-card.active{color:#fff}
        .style-card.active .style-label{color:#fff}
        .style-icon{font-size:48px;position:relative;z-index:1;transition:transform 0.3s}
        .style-card:hover .style-icon{transform:scale(1.2)}
        .style-label{font-size:15px;font-weight:600;position:relative;z-index:1}
        
        /* Search Section */
        .search-section{margin-bottom:100px}
        .glass-card{background:var(--surface);border-radius:var(--radius);padding:48px;box-shadow:var(--shadow);border:1px solid var(--border);position:relative;overflow:hidden}
        .glass-card::before{content:'';position:absolute;top:-100px;right:-100px;width:300px;height:300px;background:radial-gradient(circle,var(--accent-glow) 0%,transparent 70%);pointer-events:none}
        .search-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:32px;flex-wrap:wrap;gap:16px}
        .search-title{font-size:32px;font-weight:800}
        .ai-status{display:flex;align-items:center;gap:12px;background:var(--accent-glow);padding:10px 20px;border-radius:100px}
        .ai-status-dot{width:10px;height:10px;background:var(--success);border-radius:50%;animation:pulse 2s infinite}
        .ai-status-text{font-size:14px;font-weight:600;color:var(--accent)}
        
        /* Tabs */
        .input-tabs{display:flex;gap:8px;margin-bottom:32px;background:var(--surface-hover);padding:8px;border-radius:16px;width:fit-content}
        .input-tab{padding:14px 28px;border-radius:12px;border:none;background:transparent;color:var(--text-secondary);font-size:16px;font-weight:500;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;gap:10px}
        .input-tab.active{background:var(--surface);color:var(--text);box-shadow:0 4px 12px rgba(0,0,0,0.1)}
        .input-tab:hover:not(.active){color:var(--text)}
        
        /* Upload Zone */
        .upload-zone{border:3px dashed var(--border);border-radius:var(--radius);padding:60px;text-align:center;cursor:pointer;transition:all 0.3s;background:linear-gradient(135deg,var(--surface-hover) 0%,transparent 100%)}
        .upload-zone:hover,.upload-zone.active{border-color:var(--accent);background:var(--accent-glow)}
        .upload-zone.has-image{padding:0;border-style:solid}
        .upload-placeholder{display:flex;flex-direction:column;align-items:center;gap:20px}
        .upload-icon{font-size:72px;animation:float 3s ease-in-out infinite}
        @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
        .upload-placeholder p{color:var(--text);font-size:22px;font-weight:600}
        .upload-hint{color:var(--text-secondary);font-size:15px}
        .upload-preview{position:relative;width:100%}
        .upload-preview img{width:100%;max-height:450px;object-fit:cover;border-radius:var(--radius)}
        .analyzing-overlay{position:absolute;inset:0;background:rgba(0,0,0,0.85);backdrop-filter:blur(10px);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:20px;border-radius:var(--radius);color:#fff}
        .spinner{width:56px;height:56px;border:4px solid rgba(255,255,255,0.2);border-top-color:#fff;border-radius:50%;animation:spin 1s linear infinite}
        @keyframes spin{to{transform:rotate(360deg)}}
        
        /* Inputs */
        .input-grid{display:grid;grid-template-columns:2fr 1fr;gap:16px;margin-bottom:20px}
        .input-field{width:100%;padding:20px 24px;border:2px solid var(--border);border-radius:var(--radius-sm);font-size:17px;background:var(--surface);color:var(--text);transition:all 0.2s}
        .input-field:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 4px var(--accent-glow)}
        .input-field::placeholder{color:#9ca3af}
        .btn-primary{width:100%;background:linear-gradient(135deg,var(--accent) 0%,var(--accent-light) 100%);color:#fff;border:none;padding:20px;border-radius:var(--radius-sm);font-size:18px;font-weight:700;cursor:pointer;transition:all 0.3s;box-shadow:0 8px 24px var(--accent-glow);display:flex;align-items:center;justify-content:center;gap:12px}
        .btn-primary:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 12px 32px var(--accent-glow)}
        .btn-primary:disabled{opacity:0.6;cursor:not-allowed}
        .btn-primary.loading .btn-text{opacity:0.7}
        .loading-spinner{display:none;width:20px;height:20px;border:2px solid rgba(255,255,255,0.3);border-top-color:#fff;border-radius:50%;animation:spin 0.8s linear infinite}
        .btn-primary.loading .loading-spinner{display:block}
        
        /* Detected Styles */
        .detected-styles{margin-top:24px;padding:24px;background:var(--accent-glow);border-radius:var(--radius-sm);border:1px solid rgba(99,102,241,0.2)}
        .detected-styles-header{display:flex;align-items:center;gap:12px;margin-bottom:16px;font-weight:700;font-size:16px}
        .style-tags{display:flex;flex-wrap:wrap;gap:12px}
        .style-tag{background:var(--surface);border:2px solid var(--border);border-radius:100px;padding:12px 24px;font-size:15px;font-weight:600;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;gap:10px}
        .style-tag:hover{border-color:var(--accent);transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.1)}
        .style-tag .confidence{background:var(--accent);color:#fff;padding:4px 12px;border-radius:100px;font-size:13px;font-weight:700}
        
        /* Products */
        .products-section{margin-bottom:100px}
        .products-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:32px;flex-wrap:wrap;gap:16px}
        .products-count{font-size:16px;color:var(--text-secondary)}
        .products-count span{font-weight:700;color:var(--text)}
        .products-filters{display:flex;gap:12px}
        .filter-btn{background:var(--surface);border:1px solid var(--border);padding:10px 20px;border-radius:100px;font-size:14px;font-weight:500;cursor:pointer;transition:all 0.2s}
        .filter-btn:hover,.filter-btn.active{border-color:var(--accent);color:var(--accent)}
        .products-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:24px}
        .product-card{background:var(--surface);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);border:1px solid var(--border);transition:all 0.4s cubic-bezier(0.4,0,0.2,1);position:relative}
        .product-card:hover{transform:translateY(-12px);box-shadow:0 24px 48px rgba(0,0,0,0.12)}
        .product-wishlist{position:absolute;top:16px;right:16px;width:40px;height:40px;background:rgba(255,255,255,0.9);backdrop-filter:blur(10px);border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:20px;cursor:pointer;transition:all 0.2s;z-index:10;opacity:0;transform:scale(0.8)}
        .product-card:hover .product-wishlist{opacity:1;transform:scale(1)}
        .product-wishlist:hover{background:#fee2e2;transform:scale(1.1)}
        .product-wishlist.active{background:#fee2e2}
        .ai-badge{position:absolute;top:16px;left:16px;background:var(--accent);color:#fff;padding:8px 16px;border-radius:100px;font-size:12px;font-weight:700;z-index:10;box-shadow:0 4px 12px rgba(99,102,241,0.3)}
        .product-image{width:100%;height:300px;object-fit:cover;background:linear-gradient(135deg,var(--surface-hover) 0%,#e5e7eb 100%);transition:transform 0.5s}
        .product-card:hover .product-image{transform:scale(1.05)}
        .product-info{padding:24px}
        .product-brand{font-size:13px;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;color:var(--accent);margin-bottom:8px}
        .product-name{font-size:18px;font-weight:700;margin-bottom:12px;line-height:1.4;display:-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
        .product-reason{font-size:14px;color:var(--text-secondary);margin-bottom:16px;padding:14px 16px;background:var(--surface-hover);border-radius:var(--radius-sm);line-height:1.5;display:flex;align-items:center;gap:8px}
        .product-reason::before{content:'üí°'}
        .product-footer{display:flex;align-items:center;justify-content:space-between}
        .product-price{font-size:26px;font-weight:800}
        .product-price .original{text-decoration:line-through;color:var(--text-secondary);font-size:16px;margin-left:8px;font-weight:500}
        .btn-add{background:var(--text);color:#fff;border:none;padding:14px 28px;border-radius:var(--radius-sm);font-size:15px;font-weight:600;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;gap:8px}
        .btn-add:hover{background:var(--accent);transform:scale(1.05)}
        .btn-add:active{transform:scale(0.95)}
        
        /* Skeleton Loading */
        .skeleton{background:linear-gradient(90deg,var(--surface-hover) 25%,#e5e7eb 50%,var(--surface-hover) 75%);background-size:200% 100%;animation:shimmer 1.5s infinite}
        @keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
        
        /* Quick View Modal */
        .modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.6);backdrop-filter:blur(8px);z-index:300;opacity:0;visibility:hidden;transition:all 0.3s;display:flex;align-items:center;justify-content:center;padding:24px}
        .modal-overlay.active{opacity:1;visibility:visible}
        .modal{background:var(--surface);border-radius:var(--radius);max-width:900px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 24px 48px rgba(0,0,0,0.3);transform:scale(0.9);transition:transform 0.3s}
        .modal-overlay.active .modal{transform:scale(1)}
        .modal-close{position:absolute;top:24px;right:24px;width:44px;height:44px;background:var(--surface);border:none;border-radius:50%;font-size:24px;cursor:pointer;box-shadow:var(--shadow);transition:all 0.2s}
        .modal-close:hover{background:var(--accent);color:#fff;transform:rotate(90deg)}
        
        /* Cart */
        .cart-indicator{position:fixed;top:100px;right:24px;background:var(--surface);border:2px solid var(--accent);border-radius:100px;padding:16px 28px;display:flex;align-items:center;gap:16px;font-weight:700;z-index:99;backdrop-filter:blur(10px);box-shadow:var(--shadow-lg);cursor:pointer;transition:all 0.3s;transform:translateY(0)}
        .cart-indicator:hover{transform:translateY(-4px) scale(1.05)}
        .cart-indicator.hidden{transform:translateY(-100px);opacity:0}
        .cart-indicator-count{background:var(--accent);color:#fff;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px}
        .cart-total{color:var(--accent);font-size:22px}
        .cart-panel{position:fixed;right:0;top:0;bottom:0;width:460px;background:var(--surface);box-shadow:-8px 0 32px rgba(0,0,0,0.2);z-index:200;padding:32px;overflow-y:auto;transform:translateX(100%);transition:transform 0.4s cubic-bezier(0.4,0,0.2,1)}
        .cart-panel.open{transform:translateX(0)}
        .cart-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.5);backdrop-filter:blur(4px);z-index:199;opacity:0;visibility:hidden;transition:all 0.3s}
        .cart-overlay.open{opacity:1;visibility:visible}
        .cart-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:32px;padding-bottom:24px;border-bottom:2px solid var(--border)}
        .cart-title{font-size:28px;font-weight:800}
        .cart-item{display:flex;gap:20px;padding:20px;background:var(--surface-hover);border-radius:var(--radius-sm);margin-bottom:16px;transition:all 0.2s;position:relative}
        .cart-item:hover{transform:translateX(4px);box-shadow:0 4px 12px rgba(0,0,0,0.08)}
        .cart-item img{width:90px;height:120px;object-fit:cover;border-radius:12px;background:linear-gradient(135deg,var(--surface-hover) 0%,#e5e7eb 100%)}
        .cart-item-info{flex:1;min-width:0}
        .cart-item-name{font-weight:700;font-size:16px;margin-bottom:6px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
        .cart-item-brand{font-size:14px;color:var(--text-secondary);margin-bottom:8px}
        .cart-item-meta{display:flex;align-items:center;gap:12px}
        .cart-item-price{font-weight:800;color:var(--accent);font-size:20px}
        .cart-item-qty{display:flex;align-items:center;gap:8px;background:#fff;border-radius:8px;padding:4px}
        .qty-btn{width:28px;height:28px;border:none;background:var(--surface-hover);border-radius:6px;cursor:pointer;font-weight:700;transition:all 0.2s}
        .qty-btn:hover{background:var(--accent);color:#fff}
        .cart-item-qty span{font-weight:600;min-width:24px;text-align:center}
        .btn-remove{position:absolute;top:12px;right:12px;width:32px;height:32px;background:transparent;border:none;color:var(--text-secondary);font-size:20px;cursor:pointer;border-radius:8px;transition:all 0.2s;display:flex;align-items:center;justify-content:center}
        .btn-remove:hover{background:#fee2e2;color:#ef4444}
        .cart-suggestions{margin:32px 0;padding:24px;background:var(--surface-hover);border-radius:var(--radius-sm)}
        .cart-suggestions h4{margin-bottom:16px;font-size:16px;color:var(--text-secondary)}
        .suggestion-item{display:flex;align-items:center;gap:12px;padding:12px;background:#fff;border-radius:var(--radius-sm);margin-bottom:12px;cursor:pointer;transition:all 0.2s}
        .suggestion-item:hover{transform:translateX(4px);box-shadow:0 4px 12px rgba(0,0,0,0.08)}
        .suggestion-item img{width:60px;height:80px;object-fit:cover;border-radius:8px;background:var(--surface-hover)}
        .suggestion-item-info{flex:1}
        .suggestion-item-name{font-weight:600;font-size:14px;margin-bottom:4px}
        .suggestion-item-price{color:var(--accent);font-weight:700}
        .cart-summary{margin-top:32px;padding-top:32px;border-top:2px solid var(--border)}
        .cart-row{display:flex;justify-content:space-between;margin-bottom:16px;font-size:16px;color:var(--text-secondary)}
        .cart-row.discount{color:var(--success)}
        .cart-row.total{font-size:28px;font-weight:800;color:var(--text);margin-top:24px;padding-top:24px;border-top:2px solid var(--border)}
        .cart-actions{display:flex;flex-direction:column;gap:12px;margin-top:32px}
        .btn-checkout{width:100%;padding:20px;font-size:18px;font-weight:700;border-radius:var(--radius-sm)}
        .btn-continue{background:transparent;border:2px solid var(--border);color:var(--text);padding:16px;border-radius:var(--radius-sm);font-size:16px;font-weight:600;cursor:pointer;transition:all 0.2s}
        .btn-continue:hover{border-color:var(--accent);color:var(--accent)}
        .cart-empty{text-align:center;padding:80px 20px}
        .cart-empty-icon{font-size:80px;margin-bottom:24px;animation:float 3s ease-in-out infinite}
        .cart-empty h3{font-size:24px;margin-bottom:12px}
        .cart-empty p{color:var(--text-secondary);margin-bottom:32px}
        
        /* Recently Viewed */
        .recently-viewed{margin-bottom:100px}
        .recent-grid{display:flex;gap:20px;overflow-x:auto;padding:20px 0;scrollbar-width:none}
        .recent-grid::-webkit-scrollbar{display:none}
        .recent-item{flex-shrink:0;width:200px;background:var(--surface);border-radius:var(--radius-sm);padding:16px;box-shadow:var(--shadow);border:1px solid var(--border);cursor:pointer;transition:all 0.3s}
        .recent-item:hover{transform:translateY(-8px);box-shadow:var(--shadow-lg)}
        .recent-item img{width:100%;height:160px;object-fit:cover;border-radius:8px;margin-bottom:12px;background:var(--surface-hover)}
        .recent-item-name{font-weight:600;font-size:14px;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
        .recent-item-price{color:var(--accent);font-weight:700}
        
        /* Newsletter */
        .newsletter-section{margin-bottom:100px}
        .newsletter-card{background:linear-gradient(135deg,var(--accent) 0%,var(--accent-light) 100%);border-radius:var(--radius);padding:60px;text-align:center;color:#fff;position:relative;overflow:hidden}
        .newsletter-card::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,0.1) 0%,transparent 70%);animation:rotate 30s linear infinite}
        .newsletter-title{font-size:36px;font-weight:800;margin-bottom:16px;position:relative;z-index:1}
        .newsletter-subtitle{font-size:18px;opacity:0.9;margin-bottom:32px;position:relative;z-index:1}
        .newsletter-form{display:flex;gap:16px;max-width:500px;margin:0 auto;position:relative;z-index:1}
        .newsletter-input{flex:1;padding:18px 24px;border:none;border-radius:var(--radius-sm);font-size:16px;background:rgba(255,255,255,0.95)}
        .newsletter-input:focus{outline:none;box-shadow:0 0 0 4px rgba(255,255,255,0.3)}
        .newsletter-btn{background:var(--text);color:#fff;border:none;padding:18px 32px;border-radius:var(--radius-sm);font-size:16px;font-weight:700;cursor:pointer;transition:all 0.2s}
        .newsletter-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,0.2)}
        
        /* Footer */
        .footer{background:var(--surface);border-top:1px solid var(--border);padding:60px 0 40px}
        ..footer-content{display:grid;grid-template-columns:repeat(4,1fr);gap:40px;margin-bottom:40px}
.footer-col h4{font-size:18px;font-weight:700;margin-bottom:20px}
.footer-col a{display:block;color:var(--text-secondary);margin-bottom:12px;text-decoration:none;transition:color 0.2s}
.footer-col a:hover{color:var(--accent)}
.footer-bottom{padding-top:32px;border-top:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:16px}
.footer-logo{font-size:24px;font-weight:800;background:linear-gradient(135deg,var(--accent) 0%,var(--accent-light) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.footer-social{display:flex;gap:16px}
.footer-social a{width:44px;height:44px;background:var(--surface-hover);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:20px;transition:all 0.2s}
.footer-social a:hover{background:var(--accent);color:#fff;transform:translateY(-4px)}

/* Responsive */
@media(max-width:1024px){.carts-grid,.footer-content{grid-template-columns:repeat(2,1fr)}.styles-grid{grid-template-columns:repeat(3,1fr)}.products-grid{grid-template-columns:repeat(3,1fr)}.hero h1{font-size:56px}.hero-stats{gap:32px}}
@media(max-width:768px){.nav-links{display:none}.mobile-menu-btn{display:block}.hero h1{font-size:40px}.hero-stats{flex-direction:column;gap:24px}.how-it-works{grid-template-columns:repeat(2,1fr)}.carts-grid,.products-grid,.footer-content{grid-template-columns:1fr}.styles-grid{grid-template-columns:repeat(2,1fr)}.input-grid{grid-template-columns:1fr}.cart-panel{width:100%;max-width:460px}.glass-card{padding:32px 24px}.newsletter-card{padding:40px 24px}.newsletter-form{flex-direction:column}}

/* Animations */
.fade-in{animation:fadeIn 0.5s ease-out}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.slide-in-right{animation:slideInRight 0.4s ease-out}
@keyframes slideInRight{from{transform:translateX(100%)}to{transform:translateX(0)}}
.scale-in{animation:scaleIn 0.3s ease-out}
@keyframes scaleIn{from{transform:scale(0.9);opacity:0}to{transform:scale(1);opacity:1}}
    </style>
</head>
<body>
    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-content">
            <div class="logo" onclick="window.scrollTo(0,0)">ShopperAgent</div>
            <div class="nav-links">
                <span class="nav-link" onclick="scrollToSection('curated')">Curated</span>
                <span class="nav-link" onclick="scrollToSection('styles')">Styles</span>
                <span class="nav-link" onclick="scrollToSection('search')">Search</span>
                <span class="nav-link" onclick="toggleCart()">Cart <span id="nav-cart-count"></span></span>
                <div class="agent-badge"><span>AI Active</span></div>
            </div>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">‚ò∞</button>
        </div>
    </nav>

    <!-- Cart Indicator -->
    <div id="cart-indicator" class="cart-indicator hidden" onclick="toggleCart()">
        <span class="cart-indicator-count" id="indicator-count">0</span>
        <span>items</span>
        <span style="margin:0 8px">|</span>
        <span class="cart-total">$<span id="indicator-total">0</span></span>
    </div>

    <!-- Cart Overlay & Panel -->
    <div id="cart-overlay" class="cart-overlay" onclick="toggleCart()"></div>
    <div id="cart-panel" class="cart-panel">
        <div class="cart-header">
            <div>
                <h2 class="cart-title">Your Cart</h2>
                <p style="color:var(--text-secondary);margin-top:4px" id="cart-subtitle">0 items</p>
            </div>
            <button class="btn-close" onclick="toggleCart()">√ó</button>
        </div>
        <div id="cart-items"></div>
        <div id="cart-suggestions" class="cart-suggestions" style="display:none">
            <h4>üí° Complete Your Look</h4>
            <div id="suggestions-list"></div>
        </div>
        <div id="cart-summary-section" style="display:none">
            <div class="cart-summary">
                <div class="cart-row"><span>Subtotal</span><span id="summary-subtotal">$0</span></div>
                <div class="cart-row"><span>Agent Fee</span><span>$5.99</span></div>
                <div class="cart-row"><span>Shipping</span><span style="color:var(--success)">Free</span></div>
                <div class="cart-row discount" id="discount-row" style="display:none"><span>Discount</span><span id="discount-amount">-$0</span></div>
                <div class="cart-row total"><span>Total</span><span id="summary-total">$0</span></div>
            </div>
            <div class="cart-actions">
                <button class="btn-primary btn-checkout" onclick="checkout()">Let Agent Place Order ‚Üí</button>
                <button class="btn-continue" onclick="toggleCart()">Continue Shopping</button>
            </div>
        </div>
        <div id="cart-empty" class="cart-empty">
            <div class="cart-empty-icon">üõí</div>
            <h3>Your cart is empty</h3>
            <p>Add items from our curated carts or search</p>
            <button class="btn-primary" style="margin-top:24px" onclick="toggleCart();scrollToSection('curated')">Browse Curated Carts</button>
        </div>
    </div>

    <!-- Hero -->
    <div class="hero">
        <div class="hero-content">
            <div class="hero-badge">ü§ñ AI Agent Active</div>
            <h1>Your Personal<br><span>Shopping Agent</span></h1>
            <p class="hero-subtitle">Upload a photo, describe your style, or pick a curated cart. Our AI shops across 50+ brands and handles everything.</p>
            <div class="hero-stats">
                <div class="hero-stat">
                    <div class="hero-stat-number">50+</div>
                    <div class="hero-stat-label">Retailers</div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-number">10K+</div>
                    <div class="hero-stat-label">Products</div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-number">98%</div>
                    <div class="hero-stat-label">Match Rate</div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- How it Works -->
        <div class="how-it-works">
            <div class="step-card">
                <div class="step-number">1</div>
                <div class="step-title">Share Your Style</div>
                <div class="step-desc">Upload a photo, paste a URL, or describe what you need</div>
            </div>
            <div class="step-card">
                <div class="step-number">2</div>
                <div class="step-title">AI Curates</div>
                <div class="step-desc">Our agent searches 50+ retailers to find perfect matches</div>
            </div>
            <div class="step-card">
                <div class="step-number">3</div>
                <div class="step-title">You Approve</div>
                <div class="step-desc">Browse AI picks with reasoning and add favorites to cart</div>
            </div>
            <div class="step-card">
                <div class="step-number">4</div>
                <div class="step-title">Agent Orders</div>
                <div class="step-desc">One secure payment and we handle all the orders</div>
            </div>
        </div>

        <!-- Curated Carts -->
        <div id="curated" class="curated-section">
            <div class="section-header">
                <div>
                    <h2 class="section-title">üõçÔ∏è Curated Carts</h2>
                    <p class="section-subtitle">Complete looks, ready to order</p>
                </div>
                <span class="view-all" onclick="showAllCarts()">View all ‚Üí</span>
            </div>
            <div class="carts-grid" id="carts-grid"></div>
        </div>

        <!-- Style Categories -->
        <div id="styles" class="styles-section">
            <div class="section-header">
                <div>
                    <h2 class="section-title">üé® Choose Your Style</h2>
                    <p class="section-subtitle">Click to filter and find matching items</p>
                </div>
            </div>
            <div class="styles-grid" id="styles-grid"></div>
        </div>

        <!-- Search Section -->
        <div id="search" class="search-section">
            <div class="glass-card">
                <div class="search-header">
                    <h2 class="search-title">What are you looking for?</h2>
                    <div class="ai-status">
                        <div class="ai-status-dot"></div>
                        <span class="ai-status-text">AI Ready</span>
                    </div>
                </div>

                <div class="input-tabs">
                    <button class="input-tab active" onclick="setTab('style')" data-tab="style">üéØ My Style</button>
                    <button class="input-tab" onclick="setTab('url')" data-tab="url">üîó Product URL</button>
                    <button class="input-tab" onclick="setTab('photo')" data-tab="photo">üì∏ Upload Photo</button>
                </div>

                <div id="tab-style">
                    <div class="input-grid">
                        <input type="text" id="style-input" class="input-field" placeholder="Describe what you need (e.g., 'minimalist winter coat for office')">
                        <input type="number" id="budget-input" class="input-field" placeholder="Budget ($)">
                    </div>
                    <button class="btn-primary" id="search-btn" onclick="searchProducts()">
                        <span class="btn-text">üéØ Find My Style</span>
                        <span class="loading-spinner"></span>
                    </button>
                </div>

                <div id="tab-url" style="display:none">
                    <input type="url" id="url-input" class="input-field" placeholder="Paste product URL from ASOS, COS, Everlane..." style="margin-bottom:20px">
                    <button class="btn-primary" onclick="searchFromUrl()">
                        <span class="btn-text">üîç Find Similar Items</span>
                        <span class="loading-spinner"></span>
                    </button>
                </div>

                <div id="tab-photo" style="display:none">
                    <div id="upload-zone" class="upload-zone" onclick="document.getElementById('file-input').click()">
                        <input type="file" id="file-input" accept="image/*" style="display:none" onchange="handleFile(this)">
                        <div id="upload-content" class="upload-placeholder">
                            <span class="upload-icon">üì∏</span>
                            <p>Drop a photo here or click to upload</p>
                            <span class="upload-hint">CLIP AI will analyze your style</span>
                        </div>
                    </div>
                    <div id="detected-styles" class="detected-styles" style="display:none">
                        <div class="detected-styles-header">
                            <span>‚ú®</span>
                            <span>Detected Styles (click to search):</span>
                        </div>
                        <div id="style-tags" class="style-tags"></div>
                    </div>
                    <button class="btn-primary" onclick="searchFromPhoto()" id="photo-search-btn" style="display:none">
                        <span class="btn-text">üîç Find Matching Items</span>
                        <span class="loading-spinner"></span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Search Results -->
        <div id="search-results" class="products-section" style="display:none">
            <div class="products-header">
                <div>
                    <h2 class="section-title">‚ú® Curated For You</h2>
                    <p class="products-count">Showing <span id="results-count">8</span> AI-picked items</p>
                </div>
                <div class="products-filters">
                    <button class="filter-btn active" onclick="filterResults('all')">All</button>
                    <button class="filter-btn" onclick="filterResults('ai')">AI Picks</button>
                    <button class="filter-btn" onclick="filterResults('sale')">On Sale</button>
                </div>
            </div>
            <div class="products-grid" id="products-grid"></div>
        </div>

        <!-- Recently Viewed -->
        <div id="recently-viewed" class="recently-viewed" style="display:none">
            <div class="section-header">
                <h2 class="section-title">üëÅÔ∏è Recently Viewed</h2>
            </div>
            <div class="recent-grid" id="recent-grid"></div>
        </div>

        <!-- Newsletter -->
        <div class="newsletter-section">
            <div class="newsletter-card">
                <h2 class="newsletter-title">Get Style Alerts</h2>
                <p class="newsletter-subtitle">Subscribe for curated looks and exclusive deals</p>
                <div class="newsletter-form">
                    <input type="email" class="newsletter-input" placeholder="Enter your email" id="newsletter-email">
                    <button class="newsletter-btn" onclick="subscribeNewsletter()">Subscribe</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-col">
                    <h4>Shop</h4>
                    <a href="#">Curated Carts</a>
                    <a href="#">Style Categories</a>
                    <a href="#">New Arrivals</a>
                    <a href="#">Sale</a>
                </div>
                <div class="footer-col">
                    <h4>Help</h4>
                    <a href="#">How it Works</a>
                    <a href="#">Shipping & Returns</a>
                    <a href="#">Size Guide</a>
                    <a href="#">FAQ</a>
                </div>
                <div class="footer-col">
                    <h4>Company</h4>
                    <a href="#">About Us</a>
                    <a href="#">Careers</a>
                    <a href="#">Press</a>
                    <a href="#">Contact</a>
                </div>
                <div class="footer-col">
                    <h4>Legal</h4>
                    <a href="#">Privacy Policy</a>
                    <a href="#">Terms of Service</a>
                    <a href="#">Cookie Policy</a>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="footer-logo">ShopperAgent</div>
                <p style="color:var(--text-secondary)">¬© 2026 ShopperAgent. AI-powered shopping.</p>
                <div class="footer-social">
                    <a href="#">üì∑</a>
                    <a href="#">üê¶</a>
                    <a href="#">üíº</a>
                    <a href="#">üìå</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // State
        let cart=JSON.parse(localStorage.getItem('shopperCart')||'[]');
        let wishlist=JSON.parse(localStorage.getItem('shopperWishlist')||'[]');
        let recentlyViewed=JSON.parse(localStorage.getItem('shopperRecent')||'[]');
        let currentTab='style';
        let uploadedImage=null;
        let currentFilter='all';
        let currentProducts=[];

        // Data
        const curatedCarts=[
            {id:'minimalist',name:'The Minimalist',desc:'Clean lines, neutral palette, timeless pieces for the modern wardrobe.',price:485,items:4,featured:true,images:['https://images.unsplash.com/photo-1591047139829-d91aecb6caea?w=200','https://images.unsplash.com/photo-1552374196-1ab2a1c593e8?w=200','https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=200'],products:[{name:'Cashmere Blend Coat',brand:'COS',price:320,image:'https://images.unsplash.com/photo-1591047139829-d91aecb6caea?w=400',reason:'Perfect foundation piece for any wardrobe',aiPick:true},{name:'Merino Wool Sweater',brand:'Everlane',price:98,image:'https://images.unsplash.com/photo-1576566588028-4147f3842f27?w=400',reason:'Minimal elegance with premium feel',aiPick:true},{name:'Tailored Wool Trousers',brand:'COS',price:145,image:'https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?w=400',reason:'Clean silhouette that works everywhere',aiPick:false},{name:'Leather Loafers',brand:'Everlane',price:168,image:'https://images.unsplash.com/photo-1543163521-1bf539c55dd2?w=400',reason:'Timeless footwear investment',aiPick:false}]},
            {id:'streetwear',name:'Street Style',desc:'Urban edge with designer drops, sneakers, and statement pieces.',price:620,items:5,featured:false,images:['https://images.unsplash.com/photo-1552374196-1ab2a1c593e8?w=200','https://images.unsplash.com/photo-1523381210434-271e8be1f52b?w=200','https://images.unsplash.com/photo-1549298916-b41d501d3772?w=200'],products:[{name:'Oversized Hoodie',brand:'ASOS',price:65,image:'https://images.unsplash.com/photo-1552374196-1ab2a1c593e8?w=400',reason:'Street essential with premium cotton',aiPick:true},{name:'Cargo Pants',brand:'ASOS',price:85,image:'https://images.unsplash.com/photo-1473966968600-fa801b869a1a?w=400',reason:'Urban utility with modern fit',aiPick:true},{name:'Designer Sneakers',brand:'Nike',price:180,image:'https://images.unsplash.com/photo-1549298916-b41d501d3772?w=400',reason:'Hype approved, everyday comfort',aiPick:true},{name:'Crossbody Bag',brand:'COS',price:145,image:'https://images.unsplash.com/photo-1548036328-c9fa89d128fa?w=400',reason:'Functional style for city life',aiPick:false},{name:'Beanie',brand:'Everlane',price:35,image:'https://images.unsplash.com/photo-1576871337632-b9aef4c17ab9?w=400',reason:'Street vibes, ethical materials',aiPick:false}]},
            {id:'executive',name:'Executive Power',desc:'Boardroom-ready looks that command attention and respect.',price:890,items:6,featured:false,images:['https://images.unsplash.com/photo-1594938298603-c8148c4dae35?w=200','https://images.unsplash.com/photo-1593032465175-d529cb1e790e?w=200','https://images.unsplash.com/photo-1594223274512-ad4803739b7c?w=200'],products:[{name:'Wool Blazer',brand:'COS',price:295,image:'https://images.unsplash.com/photo-1594938298603-c8148c4dae35?w=400',reason:'Power silhouette that elevates any look',aiPick:true},{name:'Pleated Trousers',brand:'Everlane',price:128,image:'https://images.unsplash.com/photo-1594223274512-ad4803739b7c?w=400',reason:'Sharp lines for confidence',aiPick:true},{name:'Silk Shirt',brand:'COS',price:145,image:'https://images.unsplash.com/photo-1596755094514-f87e34085b2c?w=400',reason:'Executive polish with comfort',aiPick:true},{name:'Leather Belt',brand:'Everlane',price:68,image:'https://images.unsplash.com/photo-1624222247344-550fb60583dc?w=400',reason:'Details matter in business',aiPick:false},{name:'Oxford Shoes',brand:'ASOS',price:165,image:'https://images.unsplash.com/photo-1614252235316-8c857d38b5f4?w=400',reason:'Classic authority, modern comfort',aiPick:false},{name:'Briefcase',brand:'COS',price:245,image:'https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=400',reason:'Executive carry with style',aiPick:false}]}
        ];

        const styles=[{icon:'‚óªÔ∏è',label:'Minimalist',count:'2.4k'},{icon:'üèôÔ∏è',label:'Streetwear',count:'3.1k'},{icon:'üíº',label:'Business',count:'1.8k'},{icon:'üèñÔ∏è',label:'Casual',count:'4.2k'},{icon:'‚ú®',label:'Luxury',count:'956'},{icon:'üåø',label:'Sustainable',count:'1.2k'}];

        const allProducts=[
            {name:'Cashmere Blend Coat',brand:'COS',price:320,originalPrice:450,image:'https://images.unsplash.com/photo-1591047139829-d91aecb6caea?w=400',reason:'Perfect foundation piece',aiPick:true,category:'outerwear'},
            {name:'Merino Wool Sweater',brand:'Everlane',price:98,originalPrice:null,image:'https://images.unsplash.com/photo-1576566588028-4147f3842f27?w=400',reason:'Minimal elegance',aiPick:true,category:'knitwear'},
            {name:'Tailored Wool Trousers',brand:'COS',price:145,originalPrice:null,image:'https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?w=400',reason:'Clean silhouette',aiPick:false,category:'bottoms'},
            {name:'Leather Loafers',brand:'Everlane',price:168,originalPrice:220,image:'https://images.unsplash.com/photo-1543163521-1bf539c55dd2?w=400',reason:'Timeless footwear',aiPick:false,category:'shoes'},
            {name:'Oversized Hoodie',brand:'ASOS',price:65,originalPrice:null,image:'https://images.unsplash.com/photo-1552374196-1ab2a1c593e8?w=400',reason:'Street essential',aiPick:true,category:'tops'},
            {name:'Silk Midi Dress',brand:'COS',price:195,originalPrice:null,image:'https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=400',reason:'Versatile elegance',aiPick:true,category:'dresses'},
            {name:'Denim Jacket',brand:'Uniqlo',price:79,originalPrice:99,image:'https://images.unsplash.com/photo-1523205771623-e0faa4d2813d?w=400',reason:'Layering essential',aiPick:false,category:'outerwear'},
            {name:'Leather Crossbody',brand:'Everlane',price:145,originalPrice:null,image:'https://images.unsplash.com/photo-1548036328-c9fa89d128fa?w=400',reason:'Functional style',aiPick:false,category:'accessories'}
        ];

        // Init
        function init(){renderCarts();renderStyles();renderRecent();updateCartUI();}
        window.onload=init;

        // Render functions
        function renderCarts(){const grid=document.getElementById('carts-grid');grid.innerHTML=curatedCarts.map(c=>\`<div class="cart-card fade-in" onclick="addCartToCart('${c.id}')"><div class="cart-badge">${c.items} items ¬∑ ${c.featured?'Featured':''}</div><div class="cart-name">${c.name}</div><div class="cart-desc">${c.desc}</div><div class="cart-preview">${c.images.map(i=>\`<img src="${i}" alt="">\`).join('')}<div class="more">+${c.items-3}</div></div><div class="cart-meta"><div class="cart-price"><span>From</span> $${c.price}</div><button class="btn-ghost" onclick="event.stopPropagation();addCartToCart('${c.id}')">Add All</button></div></div>\`).join('');}

        function renderStyles(){const grid=document.getElementById('styles-grid');grid.innerHTML=styles.map(s=>\`<div class="style-card" onclick="selectStyle('${s.label}')" data-style="${s.label}"><span class="style-icon">${s.icon}</span><span class="style-label">${s.label}</span><small style="color:var(--text-secondary);font-size:12px;margin-top:-8px">${s.count} items</small></div>\`).join('');}

        function renderRecent(){if(recentlyViewed.length===0)return;document.getElementById('recently-viewed').style.display='block';const grid=document.getElementById('recent-grid');grid.innerHTML=recentlyViewed.map(p=>\`<div class="recent-item" onclick="addToCart('${p.id}','${p.name}','${p.brand}',${p.price},'${p.image}')"><img src="${p.image}" alt="${p.name}"><div class="recent-item-name">${p.name}</div><div class="recent-item-price">$${p.price}</div></div>\`).join('');}

        // Actions
        function selectStyle(label){document.querySelectorAll('.style-card').forEach(c=>c.classList.remove('active'));document.querySelector(\`[data-style="${label}"]\`).classList.add('active');document.getElementById('style-input').value=label;showToast('Style selected: '+label,'success');setTimeout(searchProducts,300);}

        function setTab(tab){currentTab=tab;document.querySelectorAll('.input-tab').forEach(t=>t.classList.remove('active'));document.querySelector(\`[data-tab="${tab}"]\`).classList.add('active');['style','url','photo'].forEach(t=>document.getElementById(\`tab-${t}\`).style.display=t===tab?'block':'none');}

        function handleFile(input){const file=input.files?input.files[0]:input;if(!file)return;const reader=new FileReader();reader.onload=(e)=>{uploadedImage=e.target.result;showUploadedImage(uploadedImage);analyzeImage();};reader.readAsDataURL(file);}

        function showUploadedImage(src){const zone=document.getElementById('upload-zone'),content=document.getElementById('upload-content');zone.classList.add('has-image');content.innerHTML=\`<div class="upload-preview"><img src="${src}" alt="Uploaded"></div>\`;}

        function analyzeImage(){const zone=document.getElementById('upload-zone'),overlay=document.createElement('div');overlay.className='analyzing-overlay';overlay.innerHTML='<span class="spinner"></span><p>Analyzing your style with CLIP AI...</p>';zone.querySelector('.upload-preview').appendChild(overlay);setTimeout(()=>{overlay.remove();const styles=[{style:'minimalist chic',conf:0.92},{style:'neutral palette',conf:0.87},{style:'structured silhouettes',conf:0.78}];showStyleResults(styles);document.getElementById('photo-search-btn').style.display='block';showToast('‚ú® Style analysis complete!','success');},1800);}

        function showStyleResults(styles){document.getElementById('detected-styles').style.display='block';document.getElementById('style-tags').innerHTML=styles.map((s,i)=>\`<span class="style-tag" onclick="document.getElementById('style-input').value='${s.style}';searchProducts()" style="animation:fadeIn 0.3s ${i*0.1}s both">${s.style}<span class="confidence">${Math.round(s.conf*100)}%</span></span>\`).join('');}

        function searchProducts(){const query=document.getElementById('style-input').value;if(!query){showToast('Please describe what you need','error');return;}const btn=document.getElementById('search-btn');btn.classList.add('loading');btn.disabled=true;setTimeout(()=>{currentProducts=generateProducts(query);renderProducts(currentProducts);document.getElementById('search-results').style.display='block';document.getElementById('search-results').scrollIntoView({behavior:'smooth',block:'start'});btn.classList.remove('loading');btn.disabled=false;showToast(\`‚ú® Found ${currentProducts.length} items for "${query}"\`,'success');},1200);}

        function searchFromUrl(){const url=document.getElementById('url-input').value;if(!url){showToast('Please paste a product URL','error');return;}currentProducts=generateProducts('similar items');renderProducts(currentProducts);document.getElementById('search-results').style.display='block';showToast('üîç Found similar items!','success');}

        function searchFromPhoto(){if(!uploadedImage)return;currentProducts=generateProducts('style match');renderProducts(currentProducts);document.getElementById('search-results').style.display='block';showToast('üì∏ Found matching items!','success');}

        function generateProducts(query){const cats=['Coat','Sweater','Trousers','Shoes','Bag','Dress','Jacket','Blouse'];const reasons=['Matches your style profile','Similar to items you liked','Trending this season','High quality materials','Sustainable choice','Perfect fit for you','AI recommended'];return Array.from({length:8},(_,i)=>{const base=allProducts[i%allProducts.length];return{...base,id:'prod-'+Date.now()+i,name:query.split(' ')[0]+' '+cats[i%cats.length],reason:reasons[i%reasons.length],aiPick:i<4};});}

        function renderProducts(products){const grid=document.getElementById('products-grid');document.getElementById('results-count').textContent=products.length;grid.innerHTML=products.map((p,i)=>\`<div class="product-card fade-in" style="animation-delay:${i*0.05}s" data-id="${p.id}"><button class="product-wishlist ${wishlist.includes(p.id)?'active':''}" onclick="event.stopPropagation();toggleWishlist('${p.id}',this)">‚ù§Ô∏è</button>${p.aiPick?'<div class="ai-badge">‚ú® AI Pick</div>':''}<img src="${p.image}" alt="${p.name}" class="product-image" onclick="viewProduct('${p.id}')" onerror="this.style.background='linear-gradient(135deg,#f3f4f6 0%,#e5e7eb 100%)'"><div class="product-info"><div class="product-brand">${p.brand}</div><div class="product-name">${p.name}</div><div class="product-reason">${p.reason}</div><div class="product-footer"><div class="product-price">$${p.price}${p.originalPrice?\`<span class="original">$${p.originalPrice}</span>\`:''}</div><button class="btn-add" onclick="addToCart('${p.id}','${p.name}','${p.brand}',${p.price},'${p.image}')">Add to Cart</button></div></div></div>\`).join('');}

        function filterResults(type){currentFilter=type;document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));event.target.classList.add('active');let filtered=currentProducts;if(type==='ai')filtered=currentProducts.filter(p=>p.aiPick);if(type==='sale')filtered=currentProducts.filter(p=>p.originalPrice);renderProducts(filtered);showToast(\`Filtered: ${filtered.length} items\`,'success');}

        // Cart functions
        function addCartToCart(cartId){const c=curatedCarts.find(x=>x.id===cartId);if(!c)return;c.products.forEach(p=>{cart.push({...p,cartId:Date.now()+Math.random(),qty:1});addToRecent(p);});saveCart();updateCartUI();showToast(\`‚úÖ Added ${c.items} items from "${c.name}"\`,'success');renderCartSuggestions(c);}

        function addToCart(id,name,brand,price,image){const existing=cart.find(item=>item.name===name);if(existing){existing.qty++;}else{cart.push({id,name,brand,price,image,cartId:Date.now()+Math.random(),qty:1});addToRecent({id,name,brand,price,image});}saveCart();updateCartUI();showToast(\`‚úÖ Added ${name} to cart\`,'success');}

        function removeFromCart(cartId){cart=cart.filter(item=>item.cartId!==cartId);saveCart();updateCartUI();showToast('Item removed from cart','success');}

        function updateCartUI(){const total=cart.reduce((sum,item)=>sum+(item.price*item.qty),0),count=cart.reduce((sum,item)=>sum+item.qty,0);const indicator=document.getElementById('cart-indicator');if(count>0){indicator.classList.remove('hidden');document.getElementById('indicator-count').textContent=count;document.getElementById('indicator-total').textContent=total.toFixed(2);document.getElementById('nav-cart-count').textContent='('+count+')';document.getElementById('cart-subtitle').textContent=count+' item'+(count>1?'s':'');}else{indicator.classList.add('hidden');document.getElementById('nav-cart-count').textContent='';}if(count>0){document.getElementById('cart-summary-section').style.display='block';document.getElementById('cart-empty').style.display='none';document.getElementById('cart-suggestions').style.display='block';document.getElementById('cart-items').innerHTML=cart.map(item=>\`<div class="cart-item"><img src="${item.image}" alt="${item.name}"><div class="cart-item-info"><div class="cart-item-name">${item.name}</div><div class="cart-item-brand">${item.brand}</div><div class="cart-item-meta"><span class="cart-item-price">$${item.price}</span><div class="cart-item-qty"><button class="qty-btn" onclick="updateQty(${item.cartId},-1)">‚àí</button><span>${item.qty}</span><button class="qty-btn" onclick="updateQty(${item.cartId},1)">+</button></div></div></div><button class="btn-remove" onclick="removeFromCart(${item.cartId})">√ó</button></div>\`).join('');document.getElementById('summary-subtotal').textContent='$'+total.toFixed(2);document.getElementById('summary-total').textContent='$'+(total+5.99).toFixed(2);}else{document.getElementById('cart-summary-section').style.display='none';document.getElementById('cart-empty').style.display='block';document.getElementById('cart-suggestions').style.display='none';document.getElementById('cart-items').innerHTML='';}}

        function updateQty(cartId,delta){const item=cart.find(i=>i.cartId===cartId);if(!item)return;item.qty+=delta;if(item.qty<1)item.qty=1;saveCart();updateCartUI();}

        function renderCartSuggestions(cartData){const suggestions=allProducts.filter(p=>!cartData.products.find(cp=>cp.name===p.name)).slice(0,2);const list=document.getElementById('suggestions-list');list.innerHTML=suggestions.map(p=>\`<div class="suggestion-item" onclick="addToCart('${p.id}','${p.name}','${p.brand}',${p.price},'${p.image}')"><img src="${p.image}" alt="${p.name}"><div class="suggestion-item-info"><div class="suggestion-item-name">${p.name}</div><div class="suggestion-item-price">$${p.price}</div></div><span style="color:var(--accent);font-size:20px">+</span></div>\`).join('');}

        function toggleCart(){document.getElementById('cart-panel').classList.toggle('open');document.getElementById('cart-overlay').classList.toggle('open');}

        function toggleWishlist(id,btn){if(wishlist.includes(id)){wishlist=wishlist.filter(w=>w!==id);btn.classList.remove('active');showToast('Removed from wishlist','success');}else{wishlist.push(id);btn.classList.add('active');showToast('‚ù§Ô∏è Added to wishlist','success');}localStorage.setItem('shopperWishlist',JSON.stringify(wishlist));}

        function addToRecent(product){recentlyViewed=recentlyViewed.filter(p=>p.name!==product.name);recentlyViewed.unshift(product);if(recentlyViewed.length>8)recentlyViewed=recentlyViewed.slice(0,8);localStorage.setItem('shopperRecent',JSON.stringify(recentlyViewed));renderRecent();}

        function viewProduct(id){showToast('Quick view coming soon!','success');}

        function checkout(){if(cart.length===0)return;showToast('üéâ Order placed successfully! Check your email.','success');cart=[];saveCart();updateCartUI();toggleCart();}

        function subscribeNewsletter(){const email=document.getElementById('newsletter-email').value;if(!email||!email.includes('@')){showToast('Please enter a valid email','error');return;}showToast('‚úÖ Subscribed! Welcome to ShopperAgent.','success');document.getElementById('newsletter-email').value='';}

        function showToast(message,type='success'){const container=document.getElementById('toast-container');const toast=document.createElement('div');toast.className='toast '+type;toast.innerHTML=\`<span class="toast-icon">${type==='success'?'‚úÖ':'‚ùå'}</span><span class="toast-message">${message}</span>\`;container.appendChild(toast);setTimeout(()=>{toast.style.opacity='0';toast.style.transform='translateX(400px)';setTimeout(()=>toast.remove(),300);},3000);}

        function scrollToSection(id){document.getElementById(id).scrollIntoView({behavior:'smooth',block:'start'});}

        function showAllCarts(){showToast('All curated carts view coming soon!','success');}

        function toggleMobileMenu(){showToast('Mobile menu coming soon!','success');}

        function saveCart(){localStorage.setItem('shopperCart',JSON.stringify(cart));}
    </script>
</body>
</html>
